<!DOCTYPE html>
<html>
	<head>
		<title>VK Visualizer</title>
		<link rel="stylesheet" href="vis.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="w3.css">
		<meta charset="utf-8">
		<!-- // <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <script src="setOps.js"></script>
    <script src="cb.js"></script>
		<script src="poster.js"></script>
		<script src="graphClass.js"></script>
		<!-- // <script src="test_wyler.js"></script> -->
		<script src="test_data.js"></script>
		<!-- // <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.16.1/vis.min.js"></script> -->
		<script type="text/javascript" src="vis.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<!-- // <script type="text/javascript" src="jLouvain.js"></script> -->

	</head>
 
<body>

<menu id = "controlDiv" >
<div id = "hideDiv" >
  <h1 id="logo"><img src= "vk.svg"> visualizer</h1>
  <h4 id="foundName"></h4>
  <input id="vkId" class="w3-input w3-border w3-hover-blue" value="180440651"></p>
  <a id="buildGraphButton" class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white" onclick="build_graph()">Строй График</a>
    <button onclick="collaps_control('Demo1')" class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white">Node Size</button>
    <div id="Demo1" class="w3-accordion-content">
        <button class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick='change_node_size("degree","")'>Friends</button></br>
        <button class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="change_weights_p()">Friends^2</button></br>
        <button class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="change_weights_ap()">"popularity"</button></br>
        <button class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="change_weights_centrality()">centrality</button></br>
        <button id ="receivedLikes" class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="change_weights_received()">received likes</button></br>
        <button id ="givenLikes" class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="change_weights_given()">given likes</button></br>
        <button id="calcLikes" class="w3-btn-block w3-hover-blue w3-border w3-border-red w3-white" style="width:90%" onclick="constuct_like_dict()">calc likes</button></br>
        <div class="w3-progress-container w3-round w3-large w3-round" id="likesProgbarContainer" hidden>
          <div class="w3-progressbar w3-round w3-red w3-text-black" id="likesProgbar" style="width:0%"></div>
        </div>
    </div>

  <button class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white" onclick="showNodesCB()" id="toggleLabels">Show Labels</button>
</div>
<br>
<button href="javascript:void(0)" onclick="w3_close()" id="closeMenu" class="w3-btn w3-small w3-round-xxlarge w3-hover-blue w3-border w3-border-blue w3-white"><</button>
  <button href="javascript:void(0)" onclick="w3_open()" id="openMenu"  class="w3-btn w3-small w3-round-xxlarge w3-hover-blue w3-border w3-border-blue w3-white">></button>
</menu>

<div id="container" >
<div id="nodeInfo" >
  <center  >
  
  <img id="selectedPic" class="w3-btn-block" src = ''>
  <a id="selectedName" class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white" target="_blank" href="#">name</a>
  <a id="selectedImportance"class="w3-btn-block w3-white w3-border w3-border-blue">importance</p>
  <a id="selectedDegree"class="w3-btn-block w3-white w3-border w3-border-blue">0</a>
<!-- <a id="selectedProfile" class="w3-btn-block w3-hover-blue w3-bottombar w3-border-blue" target="_blank" class="mylink" href="https">Visit Profile</a> -->
  <a id="buildSelected" class="w3-btn-block w3-hover-blue w3-white w3-border w3-border-blue"target="_blank" href="https">Строй График</a>
</center>
</div>

<div class="w3-display-container" id="test">
      
      <div class="w3-card-4 w3-display-bottommiddle">
        <button class="w3-btn-block w3-hover-blue w3-red" onclick="freeze_graph()" id="freezeGraph" style="display:none;">Click to Freeze</button>
      </div>

      <div class="w3-card-4 w3-display-middle w3-white w3-border w3-border-blue w3-round-xlarge" style="display:none;z-index:1" id="graphingCard">
 
               <header class="w3-container">
                 <h5 id="welcome"></h5>
               </header>
               <div class="w3-container" id="progressContainer">
                 <div class="w3-progress-container w3-round w3-large ">
                   <div class="w3-progressbar w3-round w3-blue" id="progbar" style="width:0%"></div>
                 </div>
               <footer class="w3-container">
                 <h5 id="friendList"></h5>
             </footer>
               </div>
       </div>

       <div class="w3-card-4 w3-display-middle w3-white w3-border w3-border-blue w3-round-xlarge" style="display:block;z-index:1;padding:10px" id="searchCard">
        <div id="searchDiv" hidden>
               <header class="w3-container">
                 <h4 id="foundNameCenter">Напиши Кличку</h4>
               </header>
               <div class="w3-container" id="search"></div>
               <input id="searchBox" class="w3-input w3-border w3-hover-blue" value="" oninput="get_posts()"></p>
               <button class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white" onclick="build_graph()">Строй График</button></br>
               <footer class="w3-container">
                 <h5 id="friendList"> </h5>
             </footer>
        </div>
        <div id="loginDiv">
  <a class="w3-btn-block w3-hover-blue w3-border w3-border-blue w3-white" id="loginP" href="https://oauth.vk.com/authorize?client_id=4966960&display=page&redirect_uri=https://wyler-m.github.io/vk-net/&scope=friends&response_type=token&v=5.60" >Войти на VK.com</a>      
       </div>
       </div>

       <div id="mynetwork" class="wrapper" hidden></div>
       
</div>

</div>
<div id="data" class="wrapper"></div>


<a href="" id="download" target="_blank" download="graph.html">Save Image</a>
  <button type="button" onclick="canvas_image()">get image</button>
  <button type="button" onclick="save_build()">save build</button>
<button type="button" style="margin-right:200px" onclick="test_build()">test build</button>

</body>

  <script>

function collaps_control(id) {
    var x = document.getElementById(id);
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else { 
        x.className = x.className.replace(" w3-show", "");
    }
}
$("#openMenu").hide();
function w3_open() {
    document.getElementById("hideDiv").style.display = "block";
    $("#openMenu").toggle();
    $("#closeMenu").toggle();        

}
function w3_close() {
    document.getElementById("hideDiv").style.display = "none";
    $("#openMenu").toggle();
    $("#closeMenu").toggle();        
   }


function get_posts(){
    var q = document.getElementById("searchBox").value
     // = data.response[1]["uid"];
    

    var query = "https://api.vk.com/method/users.search?v=3&fields=photo_50&lang=ru&q="+q+"&access_token="+access_token
    
    $.get(query, function(data, status){ 
      if (data.response[0]==1) {
        $("#foundNameCenter").text(data.response[1].first_name+" "+data.response[1].last_name)
        $("#foundName").text(data.response[1].first_name+" "+data.response[1].last_name)
        $("#vkId").attr("value","123123");
        document.getElementById("vkId").value = data.response[1]["uid"];
      }else {
        $("#foundNameCenter").text("Напиши Кличку")
        $("#foundName").text("")
        $("#vkId").attr("value","asd");
    };
    }
    )
  }


so = setOps;
access_token = null;

params = parseURLParams();
graph_dict = {}

if (params) {
  for (var param in params) {
     if (param == "user_id") {
        document.getElementById("vkId").value = params.user_id; 
      };
      if (param == "access_token"){
        $("#loginP").hide();  
        $("#searchDiv").show(); 
        $("#calcLikes").show();

        access_token = params.access_token;
      }
   }; 
};

function build_graph(test){
  $("#searchCard").hide();
	$("#mynetwork").hide();
	$("#nodeInfo").hide();
	$("#graphingCard").show()	
	$("#graphingCard").attr("class","w3-card-4 w3-display-middle w3-white w3-border w3-border-blue w3-round-xlarge");
	$("#progressContainer").show();
	
	// var current_id = document.getElementById("vkId").value;
	// if (typeof cur_graph !== "undefined") {
	// 	graph_dict[current_id] = {"graph":JSON.parse(JSON.stringify(cur_graph)), "dataSet":JSON.parse(JSON.stringify(data_set))}
	// 	delete cur_graph;
	// 	delete data_set;		
	// } else {
	// 	if (current_id in graph_dict) {
	// 		cur_graph = graph_dict[current_id].graph;	
	// 		console.log(graph_dict[current_id].graph);
	// 		console.log(graph_dict[current_id])
	// 		data_set = graph_dict[current_id].dataSet;
	// 		if (!test) {fetchFriendList()};
	// 		// return
	// 	} 

	cur_graph = new graph;
  console.log(cur_graph)
		
    options = {
      nodes: {
        shape: 'dot',
        scaling: {
          min: 3,
          max: 30
        },
        font: {
          size: 0,
          face: 'Tahoma'
        }
      },
      edges: {
        width: 0.15,
        color: {inherit: 'from'},
        smooth: {
          type: 'continuous'
        }
      },
      physics: {
        stabilization: {
          iterations:100
        },
        adaptiveTimestep: true,
        timestep: .5,
        // forceAtlas2Based: {
        // barnesHut: {
          repulsion:{
          gravitationalConstant: -80000,
          damping: 0.4,
          springConstant: 2,
          springLength: 10,
        }
      },

      interaction: {
        tooltipDelay: 10,
        hideEdgesOnDrag: true
      }
    };
    data_set = new vis.DataSet(options);

	if (!test) {fetchFriendList()};
	};
w3_close()
$("#loginDiv").show();
$("#nodeInfo").hide();
$("#givenLikes").hide();
$("#receivedLikes").hide();
$("#buildSelected").hide();
$("#calcLikes").hide();


$("#selectedName").click(function(){
    ga_onclick("#selectedName","Check Profile");
});

$("#buildSelected").click(function(){
    ga_onclick("#buildSelected","Строй График");
});

function ga_onclick(element,action){
      ga( 'send', 'event', {
          'eventCategory': 'link out',
          'eventAction': action,
          'eventLabel': $(element).attr("href")
        }); 
  }

function insertNodeInfo (argument) {
  var nodeInfo = data_set.get(argument.nodes[0])
  if (cur_graph.nodeToFriends[nodeInfo.id]) {
    var total_friends = cur_graph.nodeToFriends[argument.nodes[0]].length;
  }else {var total_friends = 0
  };
  $("#nodeInfo").toggle();
  // $("#controlDiv").toggle();

  $("#selectedName").text(nodeInfo.label);
  $("#foundName").text(nodeInfo.label);

  $("#toolTipName").attr("innerHTML","nodeInfo.label");
  $("#selectedPic").attr("src",nodeInfo.small_pic);

  $("#selectedImportance").text("Average Rank: " + nodeInfo.value);
  document.getElementById("vkId").value = nodeInfo.id;

  // $("#selectedImportance").text("Average Rank: " + Math.round(1000/(nodeInfo.value+.01)));

  if (nodeInfo.id in cur_graph.weightsDictionary.degree) {
    $("#selectedDegree").text("Connections: " + cur_graph.weightsDictionary.degree[nodeInfo.id]);
  } else {$("#selectedDegree").text("no connections")};
  
  $("#selectedName").attr("href","https://www.vk.com/id"+nodeInfo.id);


  if (nodeInfo.id && (nodeInfo.small_pic!="https://vk.com/images/deactivated_100.png")){
    $("#buildSelected").text("Строй График ("+ total_friends + " friends)");
    $("#buildGraphButton").text("Строй График ("+ total_friends + " friends)");
    $("#buildSelected").attr("href","https://wyler-m.github.io/vk-net#user_id="+nodeInfo.id);
    $("#buildSelected").show();

  } else {$("#buildSelected").hide();};
    
// google analytics
      ga( 'send', 'event', {
          'eventCategory': 'graph interaction',
          'eventAction': 'select node',
          'eventLabel': nodeInfo.id
        }); 

};

function parseURLParams() {
    var params = {};
    var args = window.location.href.split('#');
    if (args[1]) {
      var param_array = args[1].split('&');
      for(var i in param_array){
          x = param_array[i].split('=');
          params[x[0]] = x[1];
      }
    };
    return params;
}

function update_progress(total_v, current_v){
    document.getElementById("friendList").innerHTML = "Added "+ (total_v - current_v) +" of " + total_v + " friends";
    var progbar = document.getElementById("progbar")
    var percent = (total_v - current_v)/total_v *100;
    progbar.style.width = percent +'%';
}


function freeze_graph(){  
  if (network) {
    network.stopSimulation();
          ga( 'send', 'event', {
          'eventCategory': 'graph interaction',
          'eventAction': 'freeze graph',
          'eventLabel': cur_graph.ownerInfo["id"],
          'eventValue': cur_graph.get_density()
        }); 
  };
}
 
function fetchCityInfo(){
  var city_ids = cur_graph.unique_cities.join();
  var handlerURL = 'https://api.vk.com/method/database.getCitiesById?v=3&city_ids='.concat(city_ids,'&lang=ru&callback=api_fetchCityInfo');

  jQuery.getJSON(handlerURL + "&callback=?", 
    function(jsonResult){
        console.log(jsonResult);
         var cityArray = jsonResult["response"];
    for (var element in cityArray){
      cur_graph.city_dict[cityArray[element].cid] = cityArray[element].name;
  }
    });
}



function fetchDetails(id) {
    var script = document.createElement('SCRIPT');
    var y = '';
    if (access_token) {
      y = "&access_token="+access_token;
    };
    script.src = 'https://api.vk.com/method/users.get?v=3&uids='.concat(id,y,'&lang=ru&fields=first_name,last_name,city,country,universities,schools,sex,bdate,home_town,photo_200,status,photo_100&callback=api_FetchDetails');   
    document.getElementsByTagName("head")[0].appendChild(script);
    }

function api_FetchDetails(result) {
    console.log(result)
    if ('error' in result) {
      console.log(result)
    } 
    else {
      if (!cur_graph.first_pass) {
      var res_array = result["response"];
        cur_graph.add_details_array(res_array);
        fetchCityInfo();
      } 
      else {
      var res = result["response"][0];
        cur_graph.first_pass = false;
        cur_graph.init_owner(res);
        document.getElementById("welcome").innerHTML = res.first_name +" "+res.last_name;
      };
    };    
}

function fetchFriendList(id) {
    if (!id) {
      var x;
      x = document.getElementById("vkId").value;
      fetchDetails(x);
    } else {x = id; cur_graph.currentNode = id;};

    var script = document.createElement('SCRIPT');
    var y = '';
    if (access_token) {
      y = "&access_token="+access_token;
    };
    script.src = 'https://api.vk.com/method/friends.get?v=3&uid='.concat(x,y,'&order=hints&callback=api_FetchFriendList');
    
    document.getElementsByTagName("head")[0].appendChild(script);
    }

function api_FetchFriendList(result) {

//if error
    if ("error" in result) { 
        if ((result["error"]["error_code"]==6) && (cur_graph.currentNode != undefined)){
          cur_graph.unCheckedFriends.push(cur_graph.currentNode);
        }
      };
//check to see if there are any friends in friendlist
    if (!cur_graph.friends) { 
      cur_graph.init_friends(result);      
      fetchFriendList(cur_graph.currentNode);
//google analytics to see if graph was started
      ga( 'send', 'event', {
          'eventCategory': 'graph interaction',
          'eventAction': 'started graph build',
          'eventLabel': cur_graph.ownerInfo["id"],
          'eventValue': cur_graph.unCheckedFriends.length
        });  
    } 
//if not, then take intersection of the response and the friends
    else {
      if (!cur_graph.nodesRetrieved) {
        cur_graph.nodesRetrieved = true;
        var nodes = Object.assign([], cur_graph.friends); 
        while (nodes.length>0){
          var node = nodes.splice(0,100);
          fetchDetails(node.join());  
        }
      };
      update_progress(cur_graph.friends.length,cur_graph.unCheckedFriends.length);
      
// are there new friends and have there been friends added
      if (!("error" in result)) {
        cur_graph.add_new_friends(result);
      };
      
//keep recursing until all the unchecked friends are finished
      if (cur_graph.currentNode) {

//add this into the fetch frineds list
      var tempfriend = cur_graph.gotoNextNode() 

      fetchFriendList(tempfriend);  
      
      } else { 
        cur_graph.weight_nodes_popularity();
        cur_graph.weight_nodes_popularity_deg();
        cur_graph.set_weights("degree");
        cur_graph.add_city_info()
        w3_open()
        redrawAll(); 
//google analytics to see if anyone started using it
        ga( 'send', 'event', {
            'eventCategory': 'graph interaction',
             'eventAction': 'finished graph build',
             'eventLabel': cur_graph.ownerInfo["id"],
             'eventValue': cur_graph.get_density()
           });  
         return
        };
      };
    };

function constuct_like_dict(){
  $("#likesProgbarContainer").show();
  var likes_dict = {"received":{},"given":{}};
  var update = update_progress;
  build_like_dictionary(likes_dict,cur_graph,update,access_token);
  cur_graph.weightsDictionary["given"] = likes_dict["given"];
  cur_graph.weightsDictionary["received"] = likes_dict["received"];
  $("#calcLikes").hide();
}

function showNodesCB(){

options.nodes.font.size = (options.nodes.font.size == 0) ? 14 : 0 
// var cur_class = $("#toggleLabels").attr("class");
var text = $("#toggleLabels").text();
// $("#toggleLabels").attr("class", cur_class == "w3-btn-block w3-blue w3-hover-black" ? "w3-btn-block w3-black w3-hover-blue" : "w3-btn-block w3-blue w3-hover-black"); 
$("#toggleLabels").text(text == "Show Labels" ? "Hide Labels" :"Show Labels");

// if(options.nodes.font.size == 0) {options.nodes.font.size = 14;
// $("#toggleLabels").attr("class","w3-btn-block w3-black w3-hover-blue")
// } 
  // else {options.nodes.font.size = 0;
  // $("#toggleLabels").toggleClass( w3-btn-block w3-black w3-hover-blue")}
       
       network.setOptions(options);
       network.redraw();
       network.stopSimulation();
 };

function change_weights_d(){
  // cur_graph.normalize_weights("log","degree");
  cur_graph.set_weights("degree",data_set);
  network.redraw();

  network.stopSimulation()
  ga( 'send', 'event', {
          'eventCategory': 'change weight',
          'eventAction': 'degree'
        }); 
}

function change_weights_p(){
  cur_graph.normalize_weights("quad","degree",false);
  cur_graph.set_weights("quad degree",data_set);
  network.redraw();
  network.stopSimulation()

    ga( 'send', 'event', {
          'eventCategory': 'change weight',
          'eventAction': 'popularity'
        }); 
}

function change_weights_ap(){
  cur_graph.normalize_weights("linear","popularityDeg",false);
  cur_graph.set_weights("linear popularityDeg",data_set);
  network.redraw();
  network.stopSimulation()
}

function change_weights_centrality(){
  if (!("centrality" in cur_graph.weightsDictionary)) {
    cur_graph.weightsDictionary["centrality"] = get_centrality(cur_graph,network);
  };
  cur_graph.set_weights("centrality",data_set);
  network.redraw();
  network.stopSimulation()

      ga( 'send', 'event', {
          'eventCategory': 'change weight',
          'eventAction': 'average popularity'
        }); 
}

function change_node_size(weight_type,normilization){
  //normilzation can be linear, quad, or log
  //weigh_type is the name of the weight dictionary being used
  if (normilization) {
    cur_graph.normalize_weights(normilization,weight_type);
    cur_graph.set_weights(normilization+" "+weight_type,data_set);
  }else{
    cur_graph.set_weights(weight_type,data_set)
  };
  // cur_graph.set_weights(weight_type,data_set);    
  // cur_graph.set_weights("degree",data_set);

  network.redraw();
  network.stopSimulation()
}

function change_weights_received(){
  // cur_graph.normalize_weights("log","received");
  // cur_graph.set_weights("log received",data_set);
  cur_graph.set_weights("received",data_set);
  network.redraw();
  network.stopSimulation()
}

function change_weights_given(){
  // cur_graph.normalize_weights("log","given");
  // cur_graph.set_weights("log given",data_set);
  cur_graph.set_weights("given",data_set);
  network.redraw();
  network.stopSimulation()
}

function test_build(){
  build_graph(true);
cur_graph.currentNode = test_data.currentNode  
cur_graph.edges = test_data.edges   
cur_graph.first_pass = test_data.first_pass   
cur_graph.friends = test_data.friends   
cur_graph.nodeToFriends = test_data.nodeToFriends  
cur_graph.nodeToInfo = test_data.nodeToInfo   
cur_graph.nodes = test_data.nodes   
cur_graph.nodesRetrieved = test_data.nodesRetrieved   
cur_graph.ownerInfo = test_data.ownerInfo   
cur_graph.unCheckedFriends = test_data.unCheckedFriends   
cur_graph.weightsDictionary = test_data.weightsDictionary  
redrawAll()
change_weights_centrality();
}

function save_build(){
    test_data = {
    "currentNode" : cur_graph.currentNode,  
    "nodeToNeighbors" : cur_graph.nodeToNeighbors,
    "edges" : cur_graph.edges,   
    "first_pass" : cur_graph.first_pass,   
    "friends" : cur_graph.friends,   
    "nodeToFriends" : cur_graph.nodeToFriends,  
    "nodeToInfo" : cur_graph.nodeToInfo,   
    "nodes" : cur_graph.nodes,   
    "nodesRetrieved" : cur_graph.nodesRetrieved,   
    "ownerInfo" : cur_graph.ownerInfo,   
    "unCheckedFriends" : cur_graph.unCheckedFriends,   
    "weightsDictionary" : cur_graph.weightsDictionary 
    }
    document.getElementById("data").innerHTML = JSON.stringify(test_data);

}

function hide_unhide_selected(selected,hide){

  var nodes_to_hide = selected.map(function(x){
   return {"id":x,"hidden":hide}})
  data_set.update(nodes_to_hide)
}


function canvas_image(){
  var canvas = document.getElementsByTagName("canvas");
  var img    = canvas[0].toDataURL("image/png");
  var img2    = canvas[0].toDataURL("data:application/octet-stream");
  var apple = document.getElementById("download");
  apple.href = img2;
  
}


//Строй График
function redrawAll() {

    $("#graphingCard").attr("class","w3-card-4 w3-display-topmiddle w3-white w3-border w3-border-blue w3-round-xlarge");
    $("#progressContainer").hide();
    $("#mynetwork").show();


    // create a network
    var container = document.getElementById('mynetwork');
    
    data_set.add(cur_graph.nodes);

    // data_set.add(cur_graph.edges);
    
    var data = {
      nodes: data_set,
      // nodes: cur_graph.nodes,
      // nodes: test_data.nodes,
      // edges: data_set
      edges: cur_graph.edges
      // edges: test_data.links
    };

    network = new vis.Network(container, data, options);
 


    network.on("stabilized", function (params) { $("#freezeGraph").hide();});
    network.on("startStabilizing", function (params) { $("#freezeGraph").show();});
    network.on("selectNode", function (params) {        
        insertNodeInfo(params);
        var parent = params.nodes[0];
        var selected = network.getConnectedNodes(parent);
        selected.push(parent)
        hide_unhide_selected(so.complement(data_set.getIds(), selected),true)
        network.stopSimulation()
    });

    network.on("dragEnd", function (params) {console.log(params,"dragEnd");
      network.stopSimulation()});

    network.on("deselectNode", function (params) {
        $("#nodeInfo").hide();
        var parent = params.nodes[0];
        var selected = network.getConnectedNodes(parent);
        selected.push(parent)
        hide_unhide_selected(data_set.getIds(),false)
        network.stopSimulation()

    });
  }

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-86997959-1', 'auto');
  ga('send', 'pageview');
</script>

</html> 



