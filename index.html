<!DOCTYPE html>
<html>
    
<center><h1>The VK visualizer</h1></center>

<center><p>Enter An ID number</p></center>


<center><input id="vkId" value="218868103"></input></center>

<center><button type="button" onclick="fetchDetails()">go</button></center>

<!-- <p id="demo"></p> -->
<!-- <center><p id="output"></p><center> -->
<center><p>Who is this person?</p></center>
<center><p id="friendDetails">let's find out</p></center>
<center><p>Who are the friends?</p></center>
<center><button type="button" onclick="fetchFriendList()">find out</button></center>
<center><p id="friendList"></p></center>


<script>

//script.src = "https://api.vk.com/method/getProfiles?uid=218868103&callback=callbackFunc";
//script.src = 'https://api.vk.com/method/friends.get?uid=218868103&callback=callbackFunc';
//script.src = 'https://api.vk.com/method/users.get?uids=218868103&lang=en&fields=first_name,last_name,city,country,universities,schools,sex,bdate,home_town&callback=callbackFunc'

function fetchDetails() {
    var x, result;
    x = document.getElementById("vkId").value;
    var script = document.createElement('SCRIPT');

    script.src = 'https://api.vk.com/method/users.get?uids='.concat(x,'&lang=en&fields=first_name,last_name,city,country,universities,schools,sex,bdate,home_town&callback=api_FetchDetails');
    
    result = document.getElementsByTagName("head")[0].appendChild(script);

    document.getElementById("friendDetails") = result;

    fetchFriendList();
    }

function fetchFriendList() {
    var x;
    x = document.getElementById("vkId").value;
    var script = document.createElement('SCRIPT');
    script.src = 'https://api.vk.com/method/friends.get?uid='.concat(x,'&callback=api_FetchFriendList');
    document.getElementsByTagName("head")[0].appendChild(script);
    }

function api_FetchDetails(result) {
    console.log(result);
    return JSON.stringify(result); 
    // document.getElementById("friendDetails").innerHTML = ;
}

function api_FetchFriendList(result) {
    console.log(result);
    document.getElementById("friendList").innerHTML = JSON.stringify(result);
}


</script>

</body>
</html> 
