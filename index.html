<html>
<head>
<!-- подключаем xd_connection.js -->
<script src="http://vkontakte.ru/js/api/xd_connection.js?2" type="text/javascript"></script>

<script type="text/javascript">

var params = parseURLParams();
var access_token ;
var user_id = 1216918;

if (params) {
  for (var param in params) {
     if (param == "user_id") {
    // user_id = params.user_id;
      };
      if (param == "access_token"){
        access_token = params.access_token;
      }
   };
fetchFriendList(user_id);
};

console.log(access_token);


function parseURLParams() {
    var params = {};
    var args = window.location.href.split('#');
    if (args[1]) {
      var param_array = args[1].split('&');
      for(var i in param_array){
          x = param_array[i].split('=');
          params[x[0]] = x[1];
      }
    };
    return params;
}

function fetchFriendList(id) {
    
    var script = document.createElement('SCRIPT');
    var y = '';
    if (access_token) {
      y = "&access_token="+access_token;
    };
    // script.src = 'https://api.vk.com/method/friends.get?uid='.concat(id,y,'&order=hints&callback=api_FetchFriendList&fields=first_name,last_name,city,country,universities,schools,sex,bdate,home_town,photo_200');
    script.src = 'https://api.vk.com/method/friends.get?uid='.concat(id,'&order=hints&callback=api_FetchFriendList');
    // script.src = 'https://api.vk.com/method/friends.get?uid=350154&callback=api_FetchFriendList';
    
    document.getElementsByTagName("head")[0].appendChild(script);
    }

function api_FetchFriendList(result) {

console.log(result);
};


</script>
</head>


<body>
<a href="https://oauth.vk.com/authorize?client_id=4966960&display=page&redirect_uri=https://wyler-m.github.io/vk-net/&scope=friends&response_type=token&v=5.60">login</a>


</body>
</html>